# Вариант 7: Выражение из нескольких сложений через ‘;’ и операций сравнения , =, != над INT

Пример: `2+3 < 4`

## Задание 1: Разработать грамматику G по описанию (БНФ)

- **Num** – число
- **Expr** – какое-то выражение сложения
- **Comp** – оператор сравнения

Грамматика в БНФ:

(1) <Program> ::= <Expr> ";" <Program> | <Expr>
(2) <Expr> ::= <Sum> <Comp> <Sum>
(3) <Sum> ::= <Num> "+" <Sum> | <Num>


## Задание 2.1: Определить класс и однозначность языка и грамматики

### Класс грамматики
Правила грамматики имеют вид `U ::= u`, где `U ∈ V - T`, `u ∈ V*`, а значит грамматика является **контекстно-свободной**.

### Класс языка
Для данного языка можно построить регулярное выражение:

/(\d+)(\s*+(\s*\d+))(\s(<|>|=|!=)\s*\d+)\s*;

[Проверить на regex101.com](https://regex101.com/r/nimPiX/1)

Из этого следует, что язык является **регулярным** и **контекстно-свободным**.

### Проверка однозначности с помощью таблицы предиктивного анализа

#### Таблица FIRST
| Символ   | Первые символы |
|----------|----------------|
| Program  | Num            |
| Expr     | Num            |
| Sum      | Num            |

#### Таблица FOLLOW
| Символ   | Следующие символы |
|----------|-------------------|
| Program  | ;, $             |
| Expr     | <Comp>, +        |
| Sum      | <Comp>, ;, +     |

#### Таблица предиктивного анализа
| Символ   | Num | +   | Comp | ;   | $   |
|----------|-----|-----|------|-----|-----|
| Program  | (1) |     |      | (1) | (2) |
| Expr     | (2) |     |      |     |     |
| Sum      | (3) | (3) |      | (3) |     |

- **Однозначность грамматики**: однозначная
- **Однозначность языка**: однозначный

## Задание 3: Произвести 2 последовательных редукции основы в произвольной сентенциальной форме

Исходная сентенциальная форма: `2 + 3 < 4 ;`

1. **Первая редукция**: `<Num> ::= id` → `<Num> + id < id ;`
2. **Вторая редукция**: `<Num> ::= id` → `<Num> + <Num> < id ;`

## Задание 4: Построить таблицу SLR(1), привести пример разбора по ней

### Грамматика

Program -> Expr ; Program
Program -> Expr
Expr -> Sum Comp Sum
Sum -> Num + Sum
Sum -> Num
Comp -> <
Comp -> >
Comp -> =
Comp -> !=
Num -> id


### Состояния автомата (I0–I15)
- **I0:**

 <Program> ::= • <Expr> ; <Program>
  <Program> ::= • <Expr>
  <Expr> ::= • <Sum> <Comp> <Sum>
  <Sum> ::= • <Num> + <Sum>
  <Sum> ::= • <Num>
  <Num> ::= • id

- **I1 = goto(0, Expr):**

<Program> ::= <Expr> • ; <Program>
  <Program> ::= <Expr> •

- **I2 = goto(0, Sum):**

<Expr> ::= <Sum> • <Comp> <Sum>

- **I3 = goto(0, Num):**

  <Sum> ::= <Num> • + <Sum>
  <Sum> ::= <Num> •

- **I4 = goto(0, id):**

  <Num> ::= id •

- **I5 = goto(1, ;):**

  <Program> ::= <Expr> ; • <Program>
  <Program> ::= • <Expr> ; <Program>
  <Program> ::= • <Expr>
  <Expr> ::= • <Sum> <Comp> <Sum>
  <Sum> ::= • <Num> + <Sum>
  <Sum> ::= • <Num>
  <Num> ::= • id

- **I6 = goto(2, Comp):**

  <Expr> ::= <Sum> <Comp> • <Sum>

- **I7 = goto(2, <):**

  <Comp> ::= < •

- **I8 = goto(2, >):**

  <Comp> ::= > •

- **I9 = goto(2, =):**

  Comp ::= = •

- **I10 = goto(2, !=):**

  Comp ::= != •

- **I11 = goto(3, +):**

  Sum ::= Num + • Sum
  Sum ::= • Num + Sum
  Sum ::= • Num
  Num ::= • id

- **I12 = goto(5, Program):**

  Program ::= Expr ; Program •

- **I13 = goto(5, Expr):**

  Program ::= Expr • ; Program
  Program ::= Expr •

- **I14 = goto(6, Sum):**

  Expr ::= Sum Comp Sum •

- **I15 = goto(11, Sum):**

  Sum ::= Num + Sum •


Нетерминал	FIRST	FOLLOW
Program	{id}	{$}
Expr	{id}	{;,$}
Sum	{id}	{<,>,=,!=,;,$}
Comp	{<,>,=,!=}	{id}
Num	{id}	{+,<,>,=,!=,;,$}


### Таблица SLR(1)

#### Action
|     | ;   | +   | <   | >   | =   | !=  | id  | $   |
|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| 0   |     |     |     |     |     |     | s4  |     |
| 1   | s5  |     |     |     |     |     |     |     |
| 2   |     |     | s7  | s8  | s9  | s10 |     |     |
| 3   | r4  | s11 | r4  | r4  | r4  | r4  |     | r4  |
| 4   | r9  | r9  | r9  | r9  | r9  | r9  |     | r9  |
| 5   |     |     |     |     |     |     | s4  |     |
| 6   |     |     |     |     |     |     | s4  |     |
| 7   |     |     |     |     |     |     |     | r5  |
| 8   |     |     |     |     |     |     |     | r6  |
| 9   |     |     |     |     |     |     |     | r7  |
| 10  |     |     |     |     |     |     |     | r8  |
| 11  |     |     |     |     |     |     | s4  |     |
| 12  |     |     |     |     |     |     |     | acc |
| 13  | s5  |     |     |     |     |     |     | r1  |
| 14  | r2  |     |     |     |     |     |     | r2  |
| 15  | r3  |     | r3  | r3  | r3  | r3  |     | r3  |

#### Goto
|     | Program | Expr | Sum | Comp | Num |
|-----|---------|------|-----|------|-----|
| 0   |         | 1    | 2   |      | 3   |
| 1   |         |      |     |      |     |
| 2   |         |      |     | 6    |     |
| 3   |         |      |     |      |     |
| 4   |         |      |     |      |     |
| 5   | 12      | 13   | 2   |      | 3   |
| 6   |         |      | 14  |      | 3   |
| 7   |         |      |     |      |     |
| 8   |         |      |     |      |     |
| 9   |         |      |     |      |     |
| 10  |         |      |     |      |     |
| 11  |         |      | 15  |      | 3   |
| 12  |         |      |     |      |     |
| 13  |         |      |     |      |     |
| 14  |         |      |     |      |     |
| 15  |         |      |     |      |     |

### Пример разбора
Входная строка: `"id + id < id ;"`

| Stack              | Input          | Action |
|--------------------|----------------|--------|
| 0                  | id + id < id ; $ | s4     |
| 0 id 4            | + id < id ; $  | r9     |
| 0 Num             | + id < id ; $  | 3      |
| 0 Num 3           | + id < id ; $  | s11    |
| 0 Num 3 + 11      | id < id ; $    | s4     |
| 0 Num 3 + 11 id 4 | < id ; $       | r9     |
| 0 Num 3 + 11 Num  | < id ; $       | 3      |
| 0 Num 3 + 11 Num 3| < id ; $       | r4     |
| 0 Num 3 + 11 Sum  | < id ; $       | 15     |
| 0 Num 3 + 11 Sum 15 | < id ; $     | r3     |
| 0 Sum             | < id ; $       | 2      |
| 0 Sum 2           | < id ; $       | s7     |
| 0 Sum 2 < 7       | id ; $         | r5     |
| 0 Sum 2 Comp      | id ; $         | 6      |
| 0 Sum 2 Comp 6    | id ; $         | s4     |
| 0 Sum 2 Comp 6 id 4 | ; $          | r9     |
| 0 Sum 2 Comp 6 Num| ; $            | 3      |
| 0 Sum 2 Comp 6 Num 3 | ; $         | r4     |
| 0 Sum 2 Comp 6 Sum| ; $            | 14     |
| 0 Sum 2 Comp 6 Sum 14 | ; $        | r2     |
| 0 Expr            | ; $            | 1      |
| 0 Expr 1          | ; $            | s5     |
| 0 Expr 1 ; 5      | $              |        |




## Задание 5.3: Разработать анализатор ANTLR+TREE